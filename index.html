<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEON SOUL | Interface d'Évolution Existentialiste</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00ffff;
            --secondary: #ff00ff;
            --accent: #ffff00;
            --dark: #0a0a0a;
            --darker: #050505;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --neon-glow: 0 0 20px currentColor;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--darker);
            color: white;
            overflow-x: hidden;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            transition: transform 0.1s;
            z-index: 9999;
            mix-blend-mode: difference;
        }

        .cursor-follower {
            width: 40px;
            height: 40px;
            border: 1px solid var(--secondary);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            transition: transform 0.3s;
            z-index: 9998;
        }

        /* Particles */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Login Section */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(ellipse at center, rgba(0,255,255,0.1) 0%, rgba(0,0,0,0.8) 100%);
            z-index: 1000;
            transition: opacity 1s, transform 1s;
        }

        .login-form {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 60px;
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.1);
            transform: translateY(0);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .login-form h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            margin-bottom: 40px;
            text-align: center;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 20px var(--primary)); }
            to { filter: drop-shadow(0 0 30px var(--secondary)); }
        }

        .input-group {
            position: relative;
            margin: 30px 0;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--glass-border);
            color: white;
            font-size: 16px;
            transition: all 0.3s;
            outline: none;
        }

        .input-group label {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            transition: all 0.3s;
            pointer-events: none;
        }

        .input-group input:focus ~ label,
        .input-group input:valid ~ label {
            top: -20px;
            left: 0;
            font-size: 12px;
            color: var(--primary);
        }

        .input-group input:focus {
            border-bottom-color: var(--primary);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        .password-strength {
            margin-top: 10px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .password-strength.show {
            opacity: 1;
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            margin-top: 30px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 50px;
            color: black;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.5);
        }

        .login-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .login-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        /* Main Interface */
        .main-interface {
            display: none;
            min-height: 100vh;
            padding: 40px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            letter-spacing: 3px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .memento-mori {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            border-radius: 30px;
            border: 1px solid var(--glass-border);
            font-size: 12px;
            opacity: 0.7;
            transition: all 0.3s;
            z-index: 100;
        }

        .memento-mori:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 60px;
        }

        .module {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 40px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .module::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0,255,255,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .module:hover::before {
            opacity: 1;
        }

        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.2);
        }

        .module h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        /* Style Evolution Simulator */
        .drop-zone {
            border: 2px dashed var(--glass-border);
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .drop-zone:hover {
            border-color: var(--primary);
            background: rgba(0, 255, 255, 0.05);
        }

        .drop-zone.dragover {
            border-color: var(--secondary);
            background: rgba(255, 0, 255, 0.05);
        }

        /* Ethical Assistant */
        .ethical-feedback {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--secondary);
            border-radius: 15px;
            padding: 20px;
            max-width: 300px;
            transform: translateX(400px);
            transition: transform 0.5s;
            z-index: 200;
        }

        .ethical-feedback.show {
            transform: translateX(0);
        }

        /* Reverse Persona Cards */
        .persona-card {
            background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(255,0,255,0.1));
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 20px;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .persona-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
        }

        /* Chat Interface */
        .chat-container {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 350px;
            height: 500px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .chat-header {
            padding: 20px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: black;
            font-weight: bold;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .chat-input {
            display: flex;
            padding: 20px;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            color: white;
            outline: none;
        }

        .chat-input button {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 20px;
            color: black;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chat-input button:hover {
            transform: scale(1.1);
        }

        /* Navigation */
        .nav-toggle {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            z-index: 100;
        }

        .nav-item {
            display: block;
            width: 60px;
            height: 60px;
            margin: 20px 0;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            cursor: pointer;
            font-size: 24px;
        }

        .nav-item:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px var(--primary);
        }

        .nav-item.active {
            background: var(--primary);
            color: black;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .login-form {
                padding: 40px 20px;
            }
            
            .nav-toggle {
                bottom: 20px;
                right: 20px;
                top: auto;
                transform: none;
            }
            
            .nav-item {
                width: 50px;
                height: 50px;
                margin: 10px 0;
                font-size: 20px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 30px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            cursor: pointer;
            z-index: 100;
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .theme-toggle.light::before {
            transform: translateX(30px);
            background: var(--accent);
        }

        /* Charts */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <!-- Particles Canvas -->
    <canvas id="particles-canvas"></canvas>

    <!-- Theme Toggle -->
    <div class="theme-toggle" id="themeToggle"></div>

    <!-- Memento Mori -->
    <div class="memento-mori" id="mementoMori">
        <div>⏳ <span id="timeSpent">0</span>s écoulés</div>
        <div>📊 <span id="lifePercent">0.000</span>% de votre vie</div>
    </div>

    <!-- Login Section -->
    <div class="login-container" id="loginContainer">
        <form class="login-form" id="loginForm">
            <h1>NEON SOUL</h1>
            <div class="input-group">
                <input type="email" required id="emailInput">
                <label>Email</label>
            </div>
            <div class="input-group">
                <input type="password" required id="passwordInput" minlength="8">
                <label>Mot de passe</label>
                <div class="password-strength" id="passwordStrength"></div>
            </div>
            <button type="submit" class="login-btn">ENTRER DANS LA MATRICE</button>
        </form>
    </div>

    <!-- Main Interface -->
    <div class="main-interface" id="mainInterface">
        <header class="header">
            <div class="logo">NEON SOUL</div>
        </header>

        <div class="modules-grid">
            <!-- Style Evolution Simulator -->
            <div class="module">
                <h2>🔮 Simulateur d'Évolution</h2>
                <p>Analysez votre style artistique et prévoyez son évolution future</p>
                <div class="drop-zone" id="dropZone">
                    <p>Glissez vos fichiers ici (textes, images, sons)</p>
                    <input type="file" id="fileInput" multiple style="display: none;">
                </div>
                <div class="chart-container">
                    <canvas id="evolutionChart"></canvas>
                </div>
                <div id="stylePrediction" style="margin-top: 20px;"></div>
            </div>

            <!-- Reverse Persona Generator -->
            <div class="module">
                <h2>🎭 Générateur de Persona</h2>
                <p>Votre identité alternative générée en temps réel</p>
                <div id="personaContainer">
                    <div class="loading"></div>
                </div>
            </div>

            <!-- Memento Mori Detail -->
            <div class="module">
                <h2>⚰️ Memento Mori</h2>
                <p>Réflexion sur votre temps et sa valeur</p>
                <div id="mementoDetail">
                    <canvas id="lifeWheel" width="300" height="300"></canvas>
                </div>
            </div>

            <!-- Interaction Stats -->
            <div class="module">
                <h2>📊 Vos Interactions</h2>
                <p>Analyse comportementale temps réel</p>
                <div id="interactionStats">
                    <p>Clics: <span id="clickCount">0</span></p>
                    <p>Mouvement: <span id="mouseDistance">0</span>px</p>
                    <p>Scroll: <span id="scrollDistance">0</span>px</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ethical Assistant -->
    <div class="ethical-feedback" id="ethicalFeedback">
        <h3>🧠 Assistant Éthique</h3>
        <p id="ethicalMessage">Je surveille vos interactions pour vous guider vers des choix plus éthiques...</p>
    </div>

    <!-- Chat Interface -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            💬 Assistant Neon
            <button onclick="toggleChat()" style="float: right; background: none; border: none; cursor: pointer;">✕</button>
        </div>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Discutez avec l'IA...">
            <button onclick="sendMessage()">➤</button>
        </div>
    </div>

    <!-- Navigation -->
    <div class="nav-toggle">
        <div class="nav-item" onclick="toggleChat()" title="Chat">💬</div>
        <div class="nav-item" onclick="showEthicalAdvice()" title="Éthique">🧠</div>
        <div class="nav-item" onclick="generatePersona()" title="Persona">🎭</div>
        <div class="nav-item" onclick="toggleFullscreen()" title="Plein écran">⛶</div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // Global Variables
        let sessionStart = Date.now();
        let mouseData = { x: 0, y: 0, distance: 0, clicks: 0 };
        let scrollData = 0;
        let currentPersona = null;
        let evolutionChart = null;
        let particles = [];

        // Cursor Effects
        const cursor = document.querySelector('.cursor');
        const cursorFollower = document.querySelector('.cursor-follower');

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            
            cursorFollower.style.left = e.clientX + 'px';
            cursorFollower.style.top = e.clientY + 'px';
            
            // Track mouse distance
            const dx = e.clientX - mouseData.x;
            const dy = e.clientY - mouseData.y;
            mouseData.distance += Math.sqrt(dx * dx + dy * dy);
            mouseData.x = e.clientX;
            mouseData.y = e.clientY;
            
            updateInteractionStats();
        });

        // Particles System
        class Particle {
            constructor() {
                this.x = Math.random() * window.innerWidth;
                this.y = Math.random() * window.innerHeight;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 3 + 1;
                this.opacity = Math.random() * 0.5 + 0.2;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;

                if (this.x < 0 || this.x > window.innerWidth) this.vx *= -1;
                if (this.y < 0 || this.y > window.innerHeight) this.vy *= -1;
            }

            draw(ctx) {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(0, 255, 255, ${this.opacity})`;
                ctx.fill();
            }
        }

        function initParticles() {
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            for (let i = 0; i < 100; i++) {
                particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(particle => {
                    particle.update();
                    particle.draw(ctx);
                });

                requestAnimationFrame(animate);
            }

            animate();
        }

        // Login Form
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            document.getElementById('loginContainer').style.opacity = '0';
            document.getElementById('loginContainer').style.transform = 'scale(1.1)';
            setTimeout(() => {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('mainInterface').style.display = 'block';
                initApp();
            }, 1000);
        });

        // Password Strength
        document.getElementById('passwordInput').addEventListener('input', (e) => {
            const password = e.target.value;
            const strength = calculatePasswordStrength(password);
            const strengthDiv = document.getElementById('passwordStrength');
            strengthDiv.classList.add('show');
            
            if (strength < 3) {
                strengthDiv.textContent = 'Faible';
                strengthDiv.style.color = 'red';
            } else if (strength < 5) {
                strengthDiv.textContent = 'Moyen';
                strengthDiv.style.color = 'orange';
            } else {
                strengthDiv.textContent = 'Fort';
                strengthDiv.style.color = 'green';
            }
        });

        function calculatePasswordStrength(password) {
            let strength = 0;
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            return strength;
        }

        // File Drop Zone
        document.getElementById('dropZone').addEventListener('click', () => {
            document.getElementById('fileInput').click();
        });

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            document.getElementById('dropZone').addEventListener(eventName, (e) => {
                e.preventDefault();
                if (eventName === 'dragenter' || eventName === 'dragover') {
                    document.getElementById('dropZone').classList.add('dragover');
                } else if (eventName === 'dragleave') {
                    document.getElementById('dropZone').classList.remove('dragover');
                } else if (eventName === 'drop') {
                    handleFiles(e.dataTransfer.files);
                }
            });
        });

        document.getElementById('fileInput').addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    analyzeContent(file.type, e.target.result);
                };
                reader.readAsText(file);
            });
            document.getElementById('dropZone').classList.remove('dragover');
        }

        function analyzeContent(type, content) {
            // Simulate style analysis
            const styles = ['minimaliste', 'baroque', 'futuriste', 'organique', 'brutaliste'];
            const emotions = ['mélancolique', 'euphorique', 'nostalgique', 'anxieux', 'serein'];
            
            const currentStyle = styles[Math.floor(Math.random() * styles.length)];
            const currentEmotion = emotions[Math.floor(Math.random() * emotions.length)];
            
            generateEvolutionChart(currentStyle, currentEmotion);
            showStylePrediction(currentStyle, currentEmotion);
            
            // Ethical feedback
            showEthicalMessage(`J'ai analysé votre style ${currentStyle} et émotion ${currentEmotion}. Cette combinaison pourrait évoluer vers...`);
        }

        function generateEvolutionChart(style, emotion) {
            const ctx = document.getElementById('evolutionChart').getContext('2d');
            
            if (evolutionChart) {
                evolutionChart.destroy();
            }
            
            evolutionChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Minimalisme', 'Complexité', 'Émotion', 'Rationalité', 'Futurisme', 'Classicisme'],
                    datasets: [{
                        label: 'Style Actuel',
                        data: [Math.random() * 100, Math.random() * 100, Math.random() * 100, Math.random() * 100, Math.random() * 100, Math.random() * 100],
                        borderColor: '#00ffff',
                        backgroundColor: 'rgba(0, 255, 255, 0.2)'
                    }, {
                        label: 'Prédiction 5 ans',
                        data: [Math.random() * 100, Math.random() * 100, Math.random() * 100, Math.random() * 100, Math.random() * 100, Math.random() * 100],
                        borderColor: '#ff00ff',
                        backgroundColor: 'rgba(255, 0, 255, 0.2)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            pointLabels: {
                                color: 'white'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'white'
                            }
                        }
                    }
                }
            });
        }

        function showStylePrediction(style, emotion) {
            const prediction = document.getElementById('stylePrediction');
            prediction.innerHTML = `
                <h3>Prédiction d'évolution</h3>
                <p>Style actuel: <strong>${style}</strong></p>
                <p>Émotion dominante: <strong>${emotion}</strong></p>
                <p>Dans 5 ans, votre style évoluera vers une synthèse entre ${style} et ${styles[Math.floor(Math.random() * styles.length)]}</p>
            `;
        }

        // Reverse Persona Generator
        function generatePersona() {
            const adjectives = ['Mystérieux', 'Éthéré', 'Techno-shamanique', 'Cyber-poétique', 'Néo-classique'];
            const nouns = ['Architecte', 'Rêveur', 'Alchimiste', 'Voyageur', 'Observateur'];
            const traits = ['empathique', 'analytique', 'intuitif', 'visionnaire', 'pragmatique'];
            
            const persona = {
                name: `${adjectives[Math.floor(Math.random() * adjectives.length)]} ${nouns[Math.floor(Math.random() * nouns.length)]}`,
                traits: traits.sort(() => 0.5 - Math.random()).slice(0, 3),
                color: `hsl(${Math.random() * 360}, 70%, 50%)`,
                symbol: ['🌙', '✨', '🔮', '🎭', '🌌'][Math.floor(Math.random() * 5)]
            };
            
            displayPersona(persona);
            currentPersona = persona;
        }

        function displayPersona(persona) {
            const container = document.getElementById('personaContainer');
            container.innerHTML = `
                <div class="persona-card fade-in">
                    <h3>${persona.symbol} ${persona.name}</h3>
                    <div style="width: 50px; height: 50px; background: ${persona.color}; border-radius: 50%; margin: 10px 0;"></div>
                    <p>Traits: ${persona.traits.join(', ')}</p>
                </div>
            `;
        }

        // Memento Mori
        function updateMementoMori() {
            const elapsed = Math.floor((Date.now() - sessionStart) / 1000);
            const lifeExpectancy = 80 * 365 * 24 * 3600; // 80 years in seconds
            const lifePercent = (elapsed / lifeExpectancy * 100).toFixed(6);
            
            document.getElementById('timeSpent').textContent = elapsed;
            document.getElementById('lifePercent').textContent = lifePercent;
            
            drawLifeWheel(elapsed / lifeExpectancy);
        }

        function drawLifeWheel(percentage) {
            const canvas = document.getElementById('lifeWheel');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 100;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Background circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 20;
            ctx.stroke();
            
            // Life used
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, -Math.PI / 2, -Math.PI / 2 + (percentage * 2 * Math.PI));
            ctx.strokeStyle = '#00ffff';
            ctx.lineWidth = 20;
            ctx.stroke();
            
            // Text
            ctx.fillStyle = 'white';
            ctx.font = '20px JetBrains Mono';
            ctx.textAlign = 'center';
            ctx.fillText(`${(percentage * 100).toFixed(4)}%`, centerX, centerY);
        }

        // Ethical Assistant
        function showEthicalMessage(message) {
            const feedback = document.getElementById('ethicalFeedback');
            const messageDiv = document.getElementById('ethicalMessage');
            messageDiv.textContent = message;
            feedback.classList.add('show');
            
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 5000);
        }

        function showEthicalAdvice() {
            const advices = [
                "Chaque interaction laisse une trace numérique. Réfléchissez à l'empreinte que vous souhaitez laisser.",
                "La technologie reflète nos valeurs. Vos choix de design impactent la société.",
                "Prenez le temps de respirer. La conscience naît dans la pause.",
                "Vos données sont des fragments de votre identité. Protégez-les comme tel."
            ];
            
            showEthicalMessage(advices[Math.floor(Math.random() * advices.length)]);
        }

        // Chat System
        function toggleChat() {
            const chat = document.getElementById('chatContainer');
            if (chat.style.display === 'flex') {
                chat.style.display = 'none';
            } else {
                chat.style.display = 'flex';
            }
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addChatMessage(message, 'user');
                input.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        "Votre style évolue vers une synthèse fascinante entre minimalisme et complexité.",
                        "Je perçois une tension créative entre votre rationalité et votre intuition.",
                        "Vos interactions révèlent une quête de sens dans le chaos numérique.",
                        "L'analyse de vos patterns suggère une transformation profonde en cours."
                    ];
                    addChatMessage(responses[Math.floor(Math.random() * responses.length)], 'ai');
                }, 1000);
            }
        }

        function addChatMessage(message, sender) {
            const messages = document.getElementById('chatMessages');
            const div = document.createElement('div');
            div.style.margin = '10px 0';
            div.style.padding = '10px';
            div.style.borderRadius = '10px';
            div.style.background = sender === 'user' ? 'rgba(0, 255, 255, 0.2)' : 'rgba(255, 0, 255, 0.2)';
            div.style.alignSelf = sender === 'user' ? 'flex-end' : 'flex-start';
            div.textContent = message;
            messages.appendChild(div);
            messages.scrollTop = messages.scrollHeight;
        }

        // Interaction Tracking
        document.addEventListener('click', () => {
            mouseData.clicks++;
            updateInteractionStats();
        });

        document.addEventListener('scroll', () => {
            scrollData += 10;
            updateInteractionStats();
        });

        function updateInteractionStats() {
            document.getElementById('clickCount').textContent = mouseData.clicks;
            document.getElementById('mouseDistance').textContent = Math.floor(mouseData.distance);
            document.getElementById('scrollDistance').textContent = scrollData;
        }

        // Theme Toggle
        document.getElementById('themeToggle').addEventListener('click', () => {
            document.body.classList.toggle('light');
            document.getElementById('themeToggle').classList.toggle('light');
            
            // Invert colors
            if (document.body.classList.contains('light')) {
                document.documentElement.style.setProperty('--dark', '#f0f0f0');
                document.documentElement.style.setProperty('--darker', '#ffffff');
                document.documentElement.style.setProperty('--glass', 'rgba(0, 0, 0, 0.05)');
            } else {
                document.documentElement.style.setProperty('--dark', '#0a0a0a');
                document.documentElement.style.setProperty('--darker', '#050505');
                document.documentElement.style.setProperty('--glass', 'rgba(255, 255, 255, 0.05)');
            }
        });

        // Fullscreen Toggle
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // Initialize App
        function initApp() {
            initParticles();
            generatePersona();
            generateEvolutionChart('minimaliste', 'mélancolique');
            
            // Update memento mori every second
            setInterval(updateMementoMori, 1000);
            
            // Initial ethical message
            setTimeout(() => {
                showEthicalMessage("Bienvenue dans Neon Soul. Chaque interaction sculpte votre identité numérique.");
            }, 2000);
        }

        // Enter key for chat
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
